

## 路由

*Nuxt.js 依据* `pages` *目录结构自动生成* [vue-router](https://github.com/vuejs/vue-router) *模块的路由配置。*

要在页面之间使用路由，我们建议使用[\<nuxt-link\>](https://www.nuxtjs.cn/api/components-nuxt-link)标签。

```
<template>
  <nuxt-link to="/">首页</nuxt-link>
</template>
```



### 基础路由

Nuxtjs自动生成的路由

pages目录结构如下时：

```
pages/
--| user/
-----| index.vue
-----| one.vue
--| index.vue
```

自动生成的路由配置如下：

```
router: {
  routes: [
    {
      name: 'index',
      path: '/',
      component: 'pages/index.vue'
    },
    {
      name: 'user',
      path: '/user',
      component: 'pages/user/index.vue'
    },
    {
      name: 'user-one',
      path: '/user/one',
      component: 'pages/user/one.vue'
    }
  ]
}
```



### 动态路由

在Nuxtjs里定义带参数的动态路由，需要创建对应的以**下划线为前缀**的vue文件或目录

```
pages/
--| _slug/
-----| index.vue
-----| component.vue
--| user/
-----| index.vue
-----| _id.vue
--| index.vue
```

生成的路由配置如下：

```
router: {
  routes: [
    {
      name: 'index',
      path: '/',
      component: 'pages/index.vue'
    },
    {
      name: 'user',
      path: '/user',
      component: 'pages/user/index.vue'
    },
    {
      name: 'user-id',
      path: '/user/:id?',
      component: 'pages/user/_id.vue'
    },
    {
      name: 'slug',
      path: '/:slug',
      component: 'pages/_slug/index.vue'
    },
    {
      name: 'slug-component',
      path: '/:slug/component',
      component: 'pages/_slug/component.vue'
    }
  ]
}
```



#### 路由参数校验

可以在动态路由的vue文件中定义参数校验方法

```
pages/users/_id.vue
export default {
  validate({ params }) {
    // 必须是number类型
    return /^\d+$/.test(params.id)
  }
}
```

如果校验方法返回的值不为 `true`或`Promise`中 resolve 解析为`false`或抛出 Error ， Nuxt.js 将自动加载显示 404 错误页面或 500 错误页面。

想了解关于路由参数校验的信息，请参考 [页面校验 API](https://www.nuxtjs.cn/api/pages-validate)。



### 嵌套路由

通过 vue-router 的子路由创建 Nuxt.js 应用的嵌套路由。

创建内嵌子路由需要添加一个vue文件，必创建跟**该文件同名**的目录存入子视图组件。

目录结构如下：

```
pages/
--| users/
-----| index.vue
-----| _id.vue
--| users.vue
```

自动生成的路由配置如下 ：

```
router: {
  routes: [
    {
      path: '/users',
      component: 'pages/users.vue',
      children: [
        {
          path: '',
          component: 'pages/users/index.vue',
          name: 'users'
        },
        {
          path: ':id',
          component: 'pages/users/_id.vue',
          name: 'users-id'
        }
      ]
    }
  ]
}
```



### 动态嵌套路由

在动态路由下配置动态子路由。（应用场景比较少见）

目录结构如下：

```
pages/
--| _category/
-----| _subCategory/
--------| _id.vue
--------| index.vue
-----| _subCategory.vue
-----| index.vue
--| _category.vue
--| index.vue
```

自动生成的路由配置如下 ：

```
router: {
  routes: [
  	{
      path: '/',
      component: 'pages/index.vue',
      name: 'index'
    },
    {
      path: '/:category',
      component: 'pages/_category.vue',
      children: [
        {
          path: '',
          component: 'pages/_category/index.vue',
          name: 'category'
        },
        {
          path: ':subCategory',
          component: 'pages/_category/_subCategory.vue',
          children: [
            {
              path: '',
              component: 'pages/_category/_subCategory/index.vue',
              name: 'category-subCategory'
            },
            {
              path: ':id',
              component: 'pages/_category/_subCategory/_id.vue',
              name: 'category-subCategory-id'
            },
           ]
        }
      ]
    }
  ]
}
```



### 未知深度的动态嵌套路由



